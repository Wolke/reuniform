# **Re:Uniform ç³»çµ±é–‹ç™¼è¦æ ¼æ›¸ (Hackathon Version)**

## **1\. å°ˆæ¡ˆæ¦‚è¿° (Project Overview)**

å°ˆæ¡ˆåç¨±ï¼šRe:Uniform  
æ ¸å¿ƒç›®æ¨™ï¼šå»ºç«‹ä¸€å€‹ Mobile-First çš„éŸ¿æ‡‰å¼ç¶²é ï¼Œåˆ©ç”¨ AI è¦–è¦ºè¾¨è­˜ç°¡åŒ–äºŒæ‰‹åˆ¶æœä¸Šæ¶æµç¨‹ï¼Œä¸¦åˆ©ç”¨ NLP è‡ªç„¶èªè¨€è™•ç†å„ªåŒ–æœå°‹é«”é©—ã€‚  
é–‹ç™¼ç­–ç•¥ï¼šä½¿ç”¨è¼•é‡åŒ–ã€ç„¡ä¼ºæœå™¨æ¶æ§‹ï¼Œä»¥ Google ç”Ÿæ…‹ç³» (Sheets, App Script, Gemini) å¿«é€Ÿæ§‹å»º MVPã€‚

## **2\. ä½¿ç”¨è€…æ•…äº‹ (User Stories)**

ç³»çµ±æ ¸å¿ƒé‚è¼¯åˆ†ç‚ºå…©å¤§è·¯å¾‘ï¼Œè«‹ç¢ºä¿ UI/UX è¨­è¨ˆèƒ½æ¸…æ¥šå¼•å°é€™å…©å€‹æƒ…å¢ƒï¼š

### **Story A: è³£å®¶/æè´ˆè€… (The Seller)**

*"æˆ‘æ˜¯ä¸€å€‹å¿™ç¢Œçš„å®¶é•·ï¼Œå®¶è£¡æœ‰ä¸€å †å°å­©ç©¿ä¸ä¸‹çš„åˆ¶æœï¼Œæˆ‘æƒ³å¿«é€Ÿæ¸…ç†å®ƒå€‘ï¼Œä¸æƒ³èŠ±æ™‚é–“å¡«è¡¨æ ¼ã€‚"*

* **æµç¨‹**ï¼š  
  1. ä½¿ç”¨è€…åœ¨é¦–é é»æ“Š **ã€ŒğŸ“¸ æˆ‘è¦è³£ (AI ä¸Šæ¶)ã€**ã€‚  
  2. ç³»çµ±é–‹å•Ÿç›¸æ©Ÿï¼Œä½¿ç”¨è€…æ‹æ”åˆ¶æœç…§ç‰‡ã€‚  
  3. é¡¯ç¤º "AI åˆ†æä¸­..." Loading å‹•ç•«ã€‚  
  4. **AI è‡ªå‹•å¡«å¯«**ï¼šå­¸æ ¡ã€æ¬¾å¼ã€å°ºå¯¸ã€æ–°èˆŠç‹€æ³ã€å»ºè­°å”®åƒ¹ã€‚  
  5. ä½¿ç”¨è€…æª¢è¦–è‰ç¨¿ï¼Œé»æ“Š **ã€Œç¢ºèªä¸Šæ¶ã€**ã€‚  
  6. é¡¯ç¤ºæˆåŠŸç•«é¢ã€‚

### **Story B: è²·å®¶/æœå°‹è€… (The Buyer)**

*"æˆ‘æ­£åœ¨æ‰¾ç‰¹å®šå­¸æ ¡çš„åˆ¶æœï¼Œä½†æˆ‘ä¸çŸ¥é“ç¢ºåˆ‡å°ºå¯¸ï¼Œåªæƒ³ç”¨ç™½è©±æ–‡æœå°‹ã€‚å¦‚æœæ²’è²¨ï¼Œå¸Œæœ›æœ‰è²¨æ™‚é€šçŸ¥æˆ‘ã€‚"*

* **æµç¨‹**ï¼š  
  1. ä½¿ç”¨è€…åœ¨é¦–é æœå°‹æ¡†è¼¸å…¥è‡ªç„¶èªè¨€ï¼š**ã€Œæˆ‘è¦æ‰¾æµ·å±±åœ‹å°ä¸‰å¹´ç´šå¥³ç”Ÿçš„é‹å‹•æœã€**ã€‚  
  2. **AI è§£æ**ï¼šç³»çµ±è‡ªå‹•åˆ†æå‡º å­¸æ ¡:æµ·å±±åœ‹å°ã€å°ºå¯¸:130-140cmã€é¡åˆ¥:é‹å‹•æœã€‚  
  3. **æƒ…å¢ƒ 1 (æœ‰è²¨)**ï¼šé¡¯ç¤ºç¬¦åˆçš„å•†å“åˆ—è¡¨ã€‚  
  4. **æƒ…å¢ƒ 2 (ç„¡è²¨)**ï¼šåˆ—è¡¨ç‚ºç©ºï¼Œç³»çµ±é¡¯ç¤º **ã€ŒğŸ”” ç›®å‰ç¼ºè²¨ï¼ŒåŠ å…¥é ç´„é€šçŸ¥ï¼Ÿã€** æŒ‰éˆ•ã€‚  
  5. ä½¿ç”¨è€…é»æ“ŠåŠ å…¥ï¼Œç³»çµ±å°‡éœ€æ±‚å­˜å…¥ Waitlistã€‚

## **3\. æŠ€è¡“å †ç–Š (Tech Stack)**

è«‹ä½¿ç”¨ä»¥ä¸‹æŠ€è¡“é€²è¡Œé–‹ç™¼ï¼š

### **Frontend (Hosting: GitHub Pages)**

* **Framework**: React 19 with Vite build tool.  
* **Language**: JavaScript (ES6+) with JSX.  
* **Styling**: Tailwind CSS (integrated via npm).  
* **Routing**: React Router DOM for SPA navigation.  
* **Hosting**: GitHub Pages (deployed via `gh-pages` package to `gh-pages` branch).
* **Deployment**: `npm run deploy` (è‡ªå‹• build ä¸¦éƒ¨ç½²åˆ° GitHub Pages).

### **Backend (Google Apps Script)**

* **Logic**: Google Apps Script (GAS) éƒ¨ç½²ç‚º Web App (doGet, doPost).  
* **Database**: Google Sheets (ä½œç‚ºè³‡æ–™åº«).  
* **AI Integration**: ç›´æ¥åœ¨ GAS ä¸­å‘¼å« Gemini API.  
* **Security**: Gemini API Key ç›´æ¥å„²å­˜åœ¨ GAS è…³æœ¬è®Šæ•¸ä¸­ (Hackathon å¿«é€Ÿå¯¦ä½œ).

### **AI Models**

* **Vision**: OpenAI gpt-4o (ç”¨æ–¼ Story A: è¾¨è­˜åˆ¶æœåœ–ç‰‡).  
* **NLP**: OpenAI gpt-4o-mini (ç”¨æ–¼ Story B: è§£ææœå°‹èªæ„).
* **API Key Storage**: Script Properties (åœ¨ GAS ä¸­è¨­å®š `OPENAI_API_KEY`).

## **4\. ç³»çµ±æ¶æ§‹ (Architecture)**

Data Flow:  
\[React App (GitHub Pages)\] \--(fetch POST)--\> \[GAS Web App URL\]  
  â””â”€> \[OpenAI API\] (åœ–ç‰‡è¾¨è­˜ & NLP)  
  â””â”€> \[Google Drive\] (åœ–ç‰‡å„²å­˜)  
  â””â”€> \[Google Sheets\] (è³‡æ–™åº«)

1. **å‰ç«¯ (React)**ï¼šè² è²¬ UI å‘ˆç¾ã€æ‹ç…§ã€å°‡åœ–ç‰‡è½‰ç‚º Base64 å‚³é€çµ¦å¾Œç«¯ã€‚ä½¿ç”¨ React Router é€²è¡Œé é¢è·¯ç”±ã€‚  
2. **å¾Œç«¯ (GAS)**ï¼šæ¥æ”¶å‰ç«¯ JSON è«‹æ±‚ï¼Œæ ¹æ“š action åˆ†æµè™•ç†ã€‚åœ–ç‰‡ä¸Šå‚³è‡³ Google Drive ä¸¦å–å¾—å…¬é–‹ URLï¼Œå†å‘¼å« OpenAI API é€²è¡Œåˆ†æã€‚  
3. **åœ–ç‰‡å„²å­˜ (Drive)**ï¼šä½¿ç”¨ Google Drive APIï¼Œæ¯å¼µåœ–ç‰‡å„²å­˜ç‚ºç¨ç«‹æª”æ¡ˆä¸¦è¨­å®šå…¬é–‹åˆ†äº«ï¼Œè¿”å› URL å­˜å…¥ Sheetsã€‚  
4. **è³‡æ–™åº« (Sheets)**ï¼šæ¯å€‹ Tab ä»£è¡¨ä¸€å€‹è³‡æ–™è¡¨ï¼Œå„²å­˜å•†å“è³‡è¨Šï¼ˆå« Google Drive åœ–ç‰‡ URLï¼‰ã€‚

## **5\. è³‡æ–™åº«è¨­è¨ˆ (Google Sheets Structure)**

è«‹åœ¨ Google Sheet ä¸­å»ºç«‹ä»¥ä¸‹ä¸‰å€‹å·¥ä½œè¡¨ (Tabs)ï¼Œä¸¦é å¡« Mock Dataï¼š

### **Tab 1: Items (å•†å“è¡¨ \- æ”¯æ´ Story A)**

| id | seller\_id | school | type | gender | size | conditions | condition\_score | defects | status | image\_url | created\_at |
| :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- | :---- |
| *ITEM001* | *user\_001* | *æ–°åŒ—å¸‚æ¿æ©‹å€æµ·å±±åœ‹å°* | *sport\_top* | *F* | *140* | *150å…ƒ* | *4* | *ç„¡æ˜é¡¯ç‘•ç–µ* | *published* | *https://drive.google.com/...* | *2025-10-01* |
| *ITEM002* | *user\_002* | *æ–°åŒ—å¸‚æ¿æ©‹å€å…‰å¾©åœ‹å°* | *uniform\_bottom* | *M* | *M* | *200å…ƒ* | *5* | *ç„¡* | *published* | *https://drive.google.com/...* | *2025-10-02* |

**Mock Data CSV**: è«‹ç›´æ¥è¤‡è£½ `backend/mock_data_items.csv` å…§å®¹è²¼å…¥ Google Sheetsã€‚

### **Tab 2: Waitlist (é ç´„å–® \- æ”¯æ´ Story B)**

| id | requester\_id | target\_school | target\_type | target\_size | status | created\_at |
| :---- | :---- | :---- | :---- | :---- | :---- | :---- |
| *WAIT001* | *user\_003* | *æµ·å±±åœ‹å°* | *dress* | *130* | *active* | *2025-10-05* |

**Mock Data CSV**: è«‹ç›´æ¥è¤‡è£½ `backend/mock_data_waitlist.csv` å…§å®¹è²¼å…¥ Google Sheetsã€‚

### **Tab 3: Users (ä½¿ç”¨è€… \- ç°¡æ˜“ç‰ˆ)**

| uid | name | contact\_info |
| :---- | :---- | :---- |
| *user\_001* | *æ—çˆ¸çˆ¸* | *Line: lin\_papa* |

**Mock Data CSV**: è«‹ç›´æ¥è¤‡è£½ `backend/mock_data_users.csv` å…§å®¹è²¼å…¥ Google Sheetsã€‚

## **6\. å¾Œç«¯ API è¨­è¨ˆ (Google Apps Script)**

è«‹åƒè€ƒ `backend/Code.gs` å’Œ `backend/DriveHelper.gs` çš„å®Œæ•´å¯¦ä½œã€‚

**API Key è¨­å®šï¼ˆScript Propertiesï¼‰**ï¼š

1. åœ¨ Google Apps Script Editor ä¸­: **è¨­å®š** (âš™ï¸) â†’ **Script Properties**  
2. æ–°å¢å±¬æ€§:  
   - Property: `OPENAI_API_KEY`  
   - Value: `sk-proj-...` (ä½ çš„ OpenAI API Key)  
3. (é¸å¡«) Property: `DRIVE_FOLDER_ID` - è‹¥æœªè¨­å®šï¼Œç³»çµ±æœƒè‡ªå‹•å‰µå»ºåç‚º `Re_Uniform_Images` çš„è³‡æ–™å¤¾ã€‚

### **API Actions:**

#### **Action 1: uploadItem (å°æ‡‰ Story A)**

* **Input**: { "action": "uploadItem", "imageBase64": "..." }  
* **Logic**:  
  1. å‘¼å« **Gemini 2.5 Flash (Vision)** åˆ†æåœ–ç‰‡ã€‚  
  2. Prompt: "Analyze this school uniform. Return JSON with fields: school (Taiwanese school name), type (sport_top_short/sport_top_long/sport_bottom_short/sport_bottom_long/uniform_top_short/uniform_top_long/uniform_bottom_short/uniform_bottom_long/uniform_skirt/dress/jacket), gender, size, condition (1-5), defects, suggested_conditions."  
  3. å°‡ Gemini å›å‚³çš„ JSON è³‡æ–™å¯«å…¥ Items Sheetã€‚  
* **Output**: { "status": "success", "data": { ...item\_details } }

#### **Action 2: searchItems (å°æ‡‰ Story B)**

* **Input**: { "action": "searchItems", "query": "æˆ‘è¦æ‰¾æµ·å±±åœ‹å°å¥³ç”Ÿçš„é‹å‹•æœ" }  
* **Logic**:  
  1. å‘¼å« **Gemini 2.5 Flash (Text)** è§£æ Intentã€‚  
  2. Prompt: "Extract search keywords from: '${query}'. Return JSON: { school, type, gender, size\_approx }."  
  3. è®€å– Items Sheet æ‰€æœ‰è³‡æ–™ã€‚  
  4. åœ¨ GAS ä¸­é€²è¡Œç°¡å–®çš„ Filter (æ¯”å° school, type ç­‰)ã€‚  
  5. è‹¥ç„¡çµæœï¼Œå›å‚³ suggestWaitlist: trueã€‚  
* **Output**: { "status": "success", "results": \[...\], "suggestWaitlist": boolean }

#### **Action 3: addToWaitlist (å°æ‡‰ Story B \- ç„¡è²¨æ™‚)**

* **Input**: { "action": "addToWaitlist", "school": "...", "type": "..." }  
* **Logic**: å°‡è³‡æ–™å¯«å…¥ Waitlist Sheetã€‚  
* **Output**: { "status": "success" }

## **7\. å‰ç«¯é é¢è¦åŠƒ (React SPA)**

### **UI Sections (React Router):**

1. **Home View (`/`)**:  
   * Hero: å¤§æ¨™é¡Œ "Re:Uniform"ã€‚  
   * **æœ€è¿‘ä¸Šå‚³çš„åˆ¶æœ**: é¡¯ç¤ºæœ€æ–° 3 ç­†å•†å“å¡ç‰‡ + \[æ›´å¤š\] æŒ‰éˆ• â†’ é€£åˆ° `/items`ã€‚  
   * **æœ€è¿‘çš„éœ€æ±‚**: é¡¯ç¤ºæœ€æ–° 3 ç­†é ç´„éœ€æ±‚ + \[æ›´å¤š\] æŒ‰éˆ• â†’ é€£åˆ° `/waitlist`ã€‚  
   * **Story B å…¥å£**: Search Bar (è¼¸å…¥æ¡† \+ ğŸ” æŒ‰éˆ•)ã€‚  
   * **Story A å…¥å£**: Big Floating Button (ğŸ“¸ è³£åˆ¶æœ)ã€‚  
2. **Upload View (`/upload` - Modal/Page)**:  
   * \<input type="file" capture="environment"\> å•Ÿå‹•ç›¸æ©Ÿã€‚  
   * Preview Image (\<img\>).  
   * Loading Spinner ("AI æ­£åœ¨åˆ†ææ‚¨çš„åˆ¶æœ...").  
   * Form: é¡¯ç¤º AI å¡«å¥½çš„çµæœ (School, Size, Conditions)ï¼Œå…è¨±æ‰‹å‹•ä¿®æ”¹ã€‚  
   * \[ç¢ºèªä¸Šæ¶\] æŒ‰éˆ•ã€‚  
3. **Result View (`/search`)**:  
   * åˆ—å‡ºç¬¦åˆçš„æœå°‹çµæœã€‚  
   * **Empty State**: è‹¥ç„¡çµæœï¼Œé¡¯ç¤º \[ğŸ”” åŠ å…¥ç¼ºè²¨é ç´„æ¸…å–®\] æŒ‰éˆ•ã€‚  
4. **Items View (`/items`)**:  
   * å®Œæ•´åˆ—è¡¨é¡¯ç¤ºæ‰€æœ‰å•†å“ï¼ˆåˆ†é ï¼‰ã€‚  
5. **Waitlist View (`/waitlist`)**:  
   * å®Œæ•´åˆ—è¡¨é¡¯ç¤ºæ‰€æœ‰é ç´„éœ€æ±‚ï¼ˆåˆ†é ï¼‰ã€‚

## **8\. Mock Data & Testing æŒ‡å¼•**

ç”±æ–¼æ˜¯é»‘å…‹æ¾ï¼Œè«‹åœ¨å‰ç«¯ JS é è¨­ä¸€äº›è®Šæ•¸ï¼Œæ–¹ä¾¿ demoï¼š

1. **Mock User**: é è¨­ currentUserId \= "user\_001"ã€‚  
2. **Mock Image**: å¯ä»¥åœ¨å‰ç«¯æº–å‚™ä¸€å€‹ base64 string ç¯„ä¾‹ï¼Œå¦‚æœç›¸æ©Ÿå¤±æ•—å¯ä»¥ç”¨ä¾†æ¸¬è©¦ AI APIã€‚

## **9\. é–‹ç™¼æŒ‡ä»¤ (Prompt for AI)**

è«‹ä¾ç…§ä¸Šè¿°è¦æ ¼ï¼š

1. å…ˆæä¾› Code.gs çš„å®Œæ•´ç¨‹å¼ç¢¼ (åŒ…å« Gemini API å‘¼å«é‚è¼¯èˆ‡ Sheet æ“ä½œ)ã€‚  
2. æ¥è‘—æä¾› index.html, style.css, app.js çš„å®Œæ•´å‰ç«¯ç¨‹å¼ç¢¼ã€‚  
3. ç¢ºä¿å‰ç«¯ä½¿ç”¨ fetch å‘¼å« GAS Web App URL (è«‹é ç•™ const API\_URL \= "..." è®Šæ•¸)ã€‚