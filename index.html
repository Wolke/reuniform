<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Re:Uniform | 讓制服找到新主人</title>
    <meta name="description" content="全台最大的二手制服交換平台。AI 自動上架，白話文搜尋，讓資源循環更簡單。">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700;900&family=Noto+Sans+TC:wght@300;400;500;700&display=swap"
        rel="stylesheet">

    <!-- Tailwind CSS (Utility) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Background Elements -->
    <div class="bg-orb orb-1"></div>
    <div class="bg-orb orb-2"></div>
    <div class="bg-grid"></div>

    <!-- App Container -->
    <div id="app" class="app-container">

        <!-- Header -->
        <header class="glass-header">
            <div class="logo-area">
                <div class="logo-icon">👕</div>
                <h1 class="logo-text">Re:Uniform</h1>
            </div>
            <nav class="nav-links">
                <a href="#" class="nav-item active" data-view="home">首頁</a>
                <a href="#" class="nav-item" data-view="about">關於</a>
            </nav>
        </header>

        <!-- Main Content Area -->
        <main id="main-content">

            <!-- VIEW: HOME -->
            <section id="home-view" class="view active">
                <div class="hero-section">
                    <h2 class="hero-title">讓制服<br><span class="text-gradient">延續價值</span></h2>
                    <p class="hero-subtitle">全台家長都在用的二手制服交換平台<br>AI 智慧上架・白話文搜尋</p>

                    <!-- Search Bar -->
                    <div class="search-wrapper">
                        <div class="search-bar glass-panel">
                            <span class="search-icon">🔍</span>
                            <input type="text" id="searchInput" placeholder="試試看：海山國小三年級女生運動服" autocomplete="off">
                            <button id="searchBtn" class="btn-icon" aria-label="搜尋">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M5 12h14M12 5l7 7-7 7" />
                                </svg>
                            </button>
                        </div>
                        <div class="search-tags">
                            <span class="tag" data-query="海山國小女生">#海山國小</span>
                            <span class="tag" data-query="建國中學外套">#建中外套</span>
                            <span class="tag" data-query="北一女制服">#北一女</span>
                        </div>
                    </div>
                </div>

                <!-- Dashboard / Feed -->
                <div class="dashboard-section">
                    <div class="section-header">
                        <h3>最新上架</h3>
                        <span class="badge">Live</span>
                    </div>
                    <div id="recentItemsList" class="items-grid">
                        <!-- Items injected by JS -->
                        <div class="skeleton-card"></div>
                        <div class="skeleton-card"></div>
                    </div>
                </div>

                <div class="dashboard-section mt-8">
                    <div class="section-header">
                        <h3>急徵需求</h3>
                        <span class="badge badge-alert">Waiting</span>
                    </div>
                    <div id="recentWaitlistList" class="waitlist-grid">
                        <!-- Waitlist injected by JS -->
                        <div class="skeleton-row"></div>
                        <div class="skeleton-row"></div>
                    </div>
                </div>
            </section>

            <!-- VIEW: SEARCH RESULTS -->
            <section id="result-view" class="view">
                <div class="view-header">
                    <button class="btn-back" data-target="home">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <h2>搜尋結果</h2>
                </div>
                <div id="queryDisplay" class="query-summary glass-panel"></div>
                <div id="resultsContainer" class="items-grid mt-4"></div>

                <!-- Empty State -->
                <div id="emptyState" class="empty-state hidden">
                    <div class="empty-icon">🍃</div>
                    <h3>目前沒有符合的制服</h3>
                    <p>別擔心！加入預約清單，有貨時通知您。</p>
                    <button id="addWaitlistBtn" class="btn-primary mt-4">加入缺貨預約</button>
                </div>
            </section>

        </main>

        <!-- Floating Action Button -->
        <button id="uploadBtn" class="fab-main">
            <span class="fab-icon">+</span>
            <span class="fab-label">賣制服</span>
        </button>

        <!-- MODAL: UPLOAD FLOW -->
        <div id="uploadModal" class="modal-overlay">
            <div class="modal-card glass-panel">
                <div class="modal-header">
                    <h3>上架制服</h3>
                    <button class="btn-close" id="closeUploadBtn">✕</button>
                </div>

                <div class="modal-body">
                    <!-- Step 1: Camera -->
                    <div id="step-camera" class="step active">
                        <div class="upload-placeholder" id="uploadTrigger">
                            <div class="icon-camera">📸</div>
                            <p>點擊拍照或上傳</p>
                            <input type="file" id="imageInput" accept="image/*" capture="environment" hidden>
                        </div>
                        <div id="previewContainer" class="hidden">
                            <img id="imagePreview" src="" alt="Preview">
                            <div class="preview-actions">
                                <button id="retakeBtn" class="btn-text">重拍</button>
                                <button id="analyzeBtn" class="btn-primary">AI 分析</button>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Loading -->
                    <div id="step-loading" class="step">
                        <div class="loader-container">
                            <div class="ai-loader"></div>
                            <p class="typing-text">AI 正在分析制服特徵...</p>
                        </div>
                    </div>

                    <!-- Step 3: Form -->
                    <div id="step-form" class="step">
                        <form id="itemForm">
                            <div class="form-group">
                                <label>學校</label>
                                <input type="text" id="schoolInput" class="glass-input" required>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>類型</label>
                                    <select id="typeInput" class="glass-input">
                                        <option value="sport_top_short">運動服短袖</option>
                                        <option value="sport_top_long">運動服長袖</option>
                                        <option value="sport_bottom_short">運動短褲</option>
                                        <option value="sport_bottom_long">運動長褲</option>
                                        <option value="uniform_top_short">制服短袖</option>
                                        <option value="uniform_top_long">制服長袖</option>
                                        <option value="uniform_bottom_short">制服短褲</option>
                                        <option value="uniform_bottom_long">制服長褲</option>
                                        <option value="uniform_skirt">制服裙</option>
                                        <option value="dress">洋裝</option>
                                        <option value="jacket">外套</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>尺寸</label>
                                    <input type="text" id="sizeInput" class="glass-input" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>交換條件 (Conditions)</label>
                                <input type="text" id="conditionsInput" class="glass-input highlight-input"
                                    placeholder="例：免費、換飲料、100元" required>
                            </div>
                            <div class="form-group">
                                <label>新舊程度: <span id="conditionValue">3</span>/5</label>
                                <input type="range" id="conditionRange" min="1" max="5" step="1" value="3"
                                    class="range-input">
                            </div>
                            <button type="submit" class="btn-primary full-width mt-4">確認上架</button>
                        </form>
                    </div>

                    <!-- Step 4: Success -->
                    <div id="step-success" class="step">
                        <div class="success-content">
                            <div class="success-icon">🎉</div>
                            <h3>上架成功！</h3>
                            <p>感謝您的分享，讓資源循環。</p>
                            <button id="resetUploadBtn" class="btn-secondary mt-4">再上架一件</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Toast Container -->
        <div id="toast" class="toast-notification"></div>
    </div>

    <script src="app.js"></script>
</body>

</html>